local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

task.spawn(function()
    while task.wait(1) do
        if player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
            player.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

-- Xo√° UI c≈© n·∫øu c√≥
if CoreGui:FindFirstChild("HNC_Purple_UI") then
    CoreGui.HNC_Purple_UI:Destroy()
end

local gui = Instance.new("ScreenGui")
gui.Name = "HNC_Purple_UI"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = CoreGui

-- Khung ch√≠nh (cao h∆°n)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.45, 0, 0.1, 0)
frame.Position = UDim2.new(0.5, 0, 0.15, 0)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
frame.BackgroundTransparency = 0.3
frame.BorderSizePixel = 0
frame.Parent = gui
frame.Visible = false

-- Bo g√≥c
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 25)
corner.Parent = frame

-- Vi·ªÅn t√≠m neon
local stroke = Instance.new("UIStroke")
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(170, 0, 255)
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke.Parent = frame

-- Glow t√≠m
local glow = Instance.new("ImageLabel")
glow.Size = UDim2.new(1.4, 0, 2, 0)
glow.Position = UDim2.new(-0.2, 0, -0.5, 0)
glow.BackgroundTransparency = 1
glow.Image = "rbxassetid://125106574805976"
glow.ImageColor3 = Color3.fromRGB(170, 0, 255)
glow.ImageTransparency = 0.55
glow.ZIndex = -1
glow.Parent = frame

-- Gradient n·ªÅn nh·∫π
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 0, 40)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 0, 25))
}
gradient.Rotation = 45
gradient.Parent = frame

-- Ch·ªØ
local text = Instance.new("TextLabel")
text.Size = UDim2.new(1, 0, 1, 0)
text.BackgroundTransparency = 1
text.Text = "Zero Manager - Auto Collect Chest"
text.TextColor3 = Color3.fromRGB(200, 0, 255)
text.Font = Enum.Font.GothamBlack
text.TextScaled = true
text.TextStrokeTransparency = 0.5
text.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
text.Parent = frame

-- Animation hi·ªán ra
frame.Visible = true
frame.BackgroundTransparency = 1
frame.Size = UDim2.new(0.2, 0, 0.05, 0)
text.TextTransparency = 1
stroke.Thickness = 0
glow.ImageTransparency = 1

TweenService:Create(frame, TweenInfo.new(1, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    BackgroundTransparency = 0.3,
    Size = UDim2.new(0.45, 0, 0.1, 0)
}):Play()

TweenService:Create(text, TweenInfo.new(1, Enum.EasingStyle.Quad), {
    TextTransparency = 0
}):Play()

TweenService:Create(stroke, TweenInfo.new(1, Enum.EasingStyle.Quad), {
    Thickness = 2
}):Play()

TweenService:Create(glow, TweenInfo.new(1, Enum.EasingStyle.Quad), {
    ImageTransparency = 0.55
}):Play()
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- H√†m t·∫°o aura t√≠m ph·ªß to√†n th√¢n
local function applyPurpleAura(char)
    if not char then return end
    
    -- X√≥a aura c≈© n·∫øu c√≥
    if char:FindFirstChild("PurpleAura") then
        char.PurpleAura:Destroy()
    end

    -- Highlight to√†n c∆° th·ªÉ
    local aura = Instance.new("Highlight")
    aura.Name = "PurpleAura"
    aura.FillColor = Color3.fromRGB(170, 0, 255)   -- t√≠m neon
    aura.OutlineColor = Color3.fromRGB(200, 100, 255)
    aura.FillTransparency = 0.3                    -- trong m·ªù nh√¨n xuy√™n
    aura.OutlineTransparency = 0                   -- vi·ªÅn s√°ng r√µ
    aura.Parent = char
end

-- √Åp ngay l·∫≠p t·ª©c khi ƒëang s·ªëng
if LocalPlayer.Character then
    applyPurpleAura(LocalPlayer.Character)
end

-- T·ª± √°p l·∫°i khi respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    task.wait(1)
    applyPurpleAura(char)
end)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- T√πy ch·ªânh
local TEXT = "Zero Manager"
local TEXT_SIZE = 18                 -- k√≠ch th∆∞·ªõc ch·ªØ (kh√¥ng qu√° to)
local GUI_OFFSET = Vector3.new(0, 1.8, 0) -- kho·∫£ng c√°ch so v·ªõi ƒë·∫ßu
local RAINBOW_SPEED = 1.0           -- t·ªëc ƒë·ªô ƒë·ªïi m√†u (1 = b√¨nh th∆∞·ªùng, tƒÉng ƒë·ªÉ nhanh h∆°n)

local function createBillboardFor(character)
    if not character then return end
    local head = character:FindFirstChild("Head") or character:FindFirstChildWhichIsA("BasePart")
    if not head then return end

    -- N·∫øu ƒë√£ c√≥ Billboard do script t·∫°o th√¨ h·ªßy tr∆∞·ªõc
    local existing = head:FindFirstChild("HNC_FastAttack_Label")
    if existing then existing:Destroy() end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "HNC_FastAttack_Label"
    billboard.Adornee = head
    billboard.AlwaysOnTop = true
    billboard.Size = UDim2.new(0, 200, 0, 40) -- k√≠ch th∆∞·ªõc GUI
    billboard.StudsOffset = GUI_OFFSET
    billboard.Parent = head

    local textLabel = Instance.new("TextLabel")
    textLabel.Name = "Label"
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = TEXT
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextSize = TEXT_SIZE
    textLabel.TextStrokeTransparency = 0.6
    textLabel.TextTransparency = 0
    textLabel.TextScaled = false
    textLabel.Parent = billboard

    -- rainbow loop
    local hue = 0
    local con
    con = RunService.RenderStepped:Connect(function(dt)
        hue = (hue + dt * RAINBOW_SPEED) % 1
        local rgb = Color3.fromHSV(hue, 0.9, 1)
        if textLabel and textLabel.Parent then
            textLabel.TextColor3 = rgb
        else
            if con then con:Disconnect() end
        end
    end)
end

-- khi spawn/respawn character
local function onCharacterAdded(character)
    -- ƒë·ª£i head xu·∫•t hi·ªán
    if not character.Parent then
        character.AncestryChanged:Wait()
    end
    -- t·∫°o sau 0.1s ƒë·ªÉ head ch·∫Øc ch·∫Øn c√≥
    wait(0.1)
    createBillboardFor(character)
end

-- k·∫øt n·ªëi
if player.Character then
    onCharacterAdded(player.Character)
end
player.CharacterAdded:Connect(onCharacterAdded)

-- optional: n·∫øu mu·ªën t·∫Øt khi r·ªùi game (cleanup)
player.AncestryChanged:Connect(function(_, parent)
    if not parent then
        -- client ƒëang b·ªã remove, nothing to do
    end
end)
local LocalPlayer = game:GetService("Players").LocalPlayer
local Locations = workspace._WorldOrigin.Locations

local function getCharacter()
    if not LocalPlayer.Character then
        LocalPlayer.CharacterAdded:Wait()
    end
    LocalPlayer.Character:WaitForChild("HumanoidRootPart")
    return LocalPlayer.Character
end

local function DistanceFromPlrSort(ObjectList: table)
    local RootPart = getCharacter().LowerTorso
    table.sort(ObjectList, function(ChestA, ChestB)
        local RootPos = RootPart.Position
        local DistanceA = (RootPos - ChestA.Position).Magnitude
        local DistanceB = (RootPos - ChestB.Position).Magnitude
        return DistanceA < DistanceB
    end)
end

local UncheckedChests, FirstRun = {}, true
local function getChestsSorted()
    if FirstRun then
        FirstRun = false
        for _, Object in pairs(game:GetDescendants()) do
            if Object.Name:find("Chest") and Object.ClassName == "Part" then
                table.insert(UncheckedChests, Object)
            end
        end
    end
    local Chests = {}
    for _, Chest in pairs(UncheckedChests) do
        if Chest:FindFirstChild("TouchInterest") then
            table.insert(Chests, Chest)
        end
    end
    DistanceFromPlrSort(Chests)
    return Chests
end

local function toggleNoclip(Toggle: boolean)
    for _, v in pairs(getCharacter():GetChildren()) do
        if v:IsA("BasePart") then
            v.CanCollide = not Toggle
        end
    end
end

local function Teleport(Goal: CFrame)
    local RootPart = getCharacter().HumanoidRootPart
    toggleNoclip(true)
    RootPart.CFrame = Goal + Vector3.new(0, 3, 0)
    toggleNoclip(false)
end

-- Auto farm loop (restart khi respawn)
local function startFarm()
    task.spawn(function()
        while task.wait() do
            local Chests = getChestsSorted()
            if #Chests > 0 then
                Teleport(Chests[1].CFrame)
            else
                -- serverhop ·ªü ƒë√¢y n·∫øu mu·ªën
            end
        end
    end)
end

-- Auto ƒë·ªïi team sang H·∫£i Qu√¢n li√™n t·ª•c
task.spawn(function()
    local rs = game:GetService("ReplicatedStorage")
    while task.wait() do
        pcall(function()
            rs.Remotes.CommF_:InvokeServer("SetTeam","Marines")
        end)
    end
end)

-- Khi respawn th√¨ t·ª± ƒë·ªông kh·ªüi ƒë·ªông farm l·∫°i
LocalPlayer.CharacterAdded:Connect(function()
    task.wait() -- ch·ªù nh√¢n v·∫≠t load
    startFarm()
end)

-- Ch·∫°y farm l·∫ßn ƒë·∫ßu
startFarm()

repeat task.wait(2) until game:IsLoaded()

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlaceID = game.PlaceId

local AllIDs = {}
local foundAnything = ""
local actualHour = os.date("!*t").hour

-- ƒê·ªçc file server ƒë√£ join
local success = pcall(function()
    AllIDs = HttpService:JSONDecode(readfile("NotSameServers.json"))
end)

if not success then
    table.insert(AllIDs, actualHour)
    writefile("NotSameServers.json", HttpService:JSONEncode(AllIDs))
end

-- H√†m t√¨m server m·ªõi
function TPReturner()
    local Site
    if foundAnything == "" then
        Site = HttpService:JSONDecode(game:HttpGet(
            'https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'
        ))
    else
        Site = HttpService:JSONDecode(game:HttpGet(
            'https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100&cursor=' .. foundAnything
        ))
    end

    if Site.nextPageCursor and Site.nextPageCursor ~= "null" then
        foundAnything = Site.nextPageCursor
    end

    local num = 0
    for _, v in pairs(Site.data) do
        local ID = tostring(v.id)
        local Possible = true
        if tonumber(v.playing) < tonumber(v.maxPlayers) then
            for _, Existing in pairs(AllIDs) do
                if num ~= 0 then
                    if ID == tostring(Existing) then
                        Possible = false
                    end
                else
                    if tonumber(actualHour) ~= tonumber(Existing) then
                        local delFile = pcall(function()
                            delfile("NotSameServers.json")
                            AllIDs = {}
                            table.insert(AllIDs, actualHour)
                        end)
                    end
                end
                num = num + 1
            end
            if Possible then
                table.insert(AllIDs, ID)
                pcall(function()
                    writefile("NotSameServers.json", HttpService:JSONEncode(AllIDs))
                    
-- H√†m hop li√™n t·ª•c
function TeleportLoop()
    while task.wait() do
        pcall(function()
            TPReturner()
            if foundAnything ~= "" then
                TPReturner()
            end
        end)
    end
end

-- ‚ö° Ch·ªù 60 gi√¢y sau khi b·∫≠t script r·ªìi hop
task.delay(180, function()
    TeleportLoop()
end)
-- üåå Auto Reset + Invisible (respawn support) + Clear Map (ghi ch√∫ m√†u t√≠m)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

if CoreGui:FindFirstChild("HN_MiniUI") then
    CoreGui.HN_MiniUI:Destroy()
end

local gui = Instance.new("ScreenGui")
gui.Name = "HN_MiniUI"
gui.Parent = CoreGui

-- H√†m t·∫°o toggle
local function createToggle(name, posY, default, callback)
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0, 120, 0, 15)
    title.Position = UDim2.new(1, -140, 0.1, posY)
    title.AnchorPoint = Vector2.new(0, 0)
    title.BackgroundTransparency = 1
    title.Text = name
    title.TextColor3 = Color3.fromRGB(170, 0, 255) -- üíú ghi ch√∫ m√†u t√≠m
    title.Font = Enum.Font.GothamBold
    title.TextSize = 12
    title.Parent = gui

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 20, 0, 20)
    btn.Position = UDim2.new(1, -70, 0.1, posY + 20)
    btn.AnchorPoint = Vector2.new(0, 0)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 14
    btn.Font = Enum.Font.GothamBold
    btn.Parent = gui
    Instance.new("UICorner", btn).CornerRadius = UDim.new(1, 0)

    local state = default
    local function updateVisual()
        if state then
            btn.BackgroundColor3 = Color3.fromRGB(170, 0, 255) -- t√≠m khi on
            btn.Text = "‚úì"
        else
            btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100) -- x√°m khi off
            btn.Text = ""
        end
    end
    updateVisual()

    btn.MouseButton1Click:Connect(function()
        state = not state
        updateVisual()
        callback(state)
    end)

    return function() return state end, function(newState)
        state = newState
        updateVisual()
        callback(state)
    end
end

-- === AUTO RESET ===
local AutoReset = true
createToggle("Anti Kick", 0, true, function(state)
    AutoReset = state
end)

task.spawn(function()
    while task.wait(13) do
        if AutoReset and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.Health = 0
        end
    end
end)

-- === INVISIBLE (b·∫£n th√¢n, gi·ªØ khi respawn) ===
local Invisible = false

local function setInvisible(state)
    if LocalPlayer.Character then
        for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("Decal") then
                part.LocalTransparencyModifier = state and 1 or 0
            end
        end
    end
end

local getInvState, setInvState = createToggle("Invisible", 60, false, function(state)
    Invisible = state
    setInvisible(Invisible)
end)

-- Khi respawn, n·∫øu Invisible ƒëang b·∫≠t th√¨ √°p l·∫°i
LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    task.wait(0.2)
    if Invisible then
        setInvisible(true)
    end
end)

-- === CLEAR MAP (t√†ng h√¨nh map) ===
local function setMapInvisible(state)
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") or obj:IsA("Decal") then
            if not obj:IsDescendantOf(LocalPlayer.Character) then
                obj.LocalTransparencyModifier = state and 1 or 0
            end
        end
    end
end

createToggle("Clear Map", 120, false, function(state)
    setMapInvisible(state)
end)
